<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Reporting errors - utPLSQL</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../index.html">utPLSQL</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../../index.html">Home</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../install/index.html">Installation</a>
</li>
                            
<li >
    <a href="../getting-started/index.html">Getting Started</a>
</li>
                            
<li >
    <a href="../annotations/index.html">Annotations</a>
</li>
                            
<li >
    <a href="../expectations/index.html">Expectations</a>
</li>
                            
<li >
    <a href="../running-unit-tests/index.html">Running unit tests</a>
</li>
                            
<li >
    <a href="../ut_run-script/index.html">Using the ut_run script</a>
</li>
                            
<li >
    <a href="../best-practices/index.html">Testing best pracitces</a>
</li>
                            
<li >
    <a href="../upgrade/index.html">Upgrade utPLSQL</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reporting <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../reporters/index.html">Using reporters</a>
</li>
                            
<li class="active">
    <a href="index.html">Reporting errors</a>
</li>
                            
<li >
    <a href="../coverage/index.html">Code coverage</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../about/project-details/index.html">Project Details</a>
</li>
                            
<li >
    <a href="../../about/license/index.html">License</a>
</li>
                            
<li >
    <a href="../../about/support/index.html">Support</a>
</li>
                            
<li >
    <a href="../../about/authors/index.html">Authors</a>
</li>
                            
<li >
    <a href="../../about/CONTRIBUTING/index.html">Contributing</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../reporters/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../coverage/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/utPLSQL/utPLSQL">
                                <i class="fa fa-github"></i>GitHub
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#exception-handling-and-reporting">Exception handling and reporting</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="exception-handling-and-reporting">Exception handling and reporting</h1>
<p>The utPLSQL is responsible for handling exceptions wherever they occur in the test run. utPLSQL is trapping most of the exceptions so that the test execution is not affected by individual tests or test packages throwing an exception.
The framework provides a full stacktrace for every exception that was thrown. The stacktrace is clean and does not include any utPLSQL library calls in it.
To achieve rerunability, the ORA-04068, ORA-04061 exceptions are not handled and test execution will be interrupted if such exception is encountered. This is because of how Oracle behaves on those exceptions.</p>
<p>Test execution can fail for different reasons. The failures on different exceptions are handled as follows:
<em> A test package without body - each <code>%test</code> is reported as failed with exception, nothing is executed
</em> A test package with <em>invalid body</em> - each <code>%test</code> is reported as failed with exception, nothing is executed
<em> A test package with <em>invalid spec</em> - package is not considered a valid unit test package and is excluded from execution. When trying to run a test package with invalid spec explicitly, exception is raised. Only valid specifications are parsed for annotations 
</em> A test package that is raising an exception in <code>%beforeall</code> - each <code>%test</code> is reported as failed with exception, <code>%test</code>, <code>%beforeeach</code>, <code>%beforetest</code>, <code>%aftertest</code> and <code>%aftereach</code> are not executed. <code>%afterall</code> is executed to allow cleanup of whatever was done in <code>%beforeall</code>
<em> A test package that is raising an exception in <code>%beforeeach</code> - each <code>%test</code> is reported as failed with exception, <code>%test</code>, <code>%beforetest</code> and <code>%aftertest</code> is not executed. The <code>%aftereach</code> and <code>%afterall</code> blocks are getting executed to allow cleanup of whatever was done in <code>%before...</code> blocks
</em> A test package that is raising an exception in <code>%beforetest</code> - the <code>%test</code> is reported as failed  with exception, <code>%test</code> is not executed. The <code>%aftertest</code>, <code>%aftereach</code> and <code>%afterall</code> blocks are getting executed to allow cleanup of whatever was done in <code>%before...</code> blocks
<em> A test package that is raising an exception in <code>%test</code> - the <code>%test</code> is reported as failed with exception. The execution of other blocks continues normally
</em> A test package that is raising an exception in <code>%aftertest</code> - the <code>%test</code> is reported as failed with exception. The execution of other blocks continues normally
<em> A test package that is raising an exception in <code>%aftereach</code> - each <code>%test</code> is reported as failed with exception.
</em> A test package that is raising an exception in <code>%afterall</code> - all blocks of  the package are executed, as the <code>%afterall</code> is the last step of package execution. Exception in <code>%afterall</code> is not affecting test results. A warning with exception stacktrace is displayed in the summary</p>
<p>Example of reporting with exception thrown in <code>%beforetest</code>:</p>
<pre><code>Remove rooms by name
  Removes a room without content in it (FAILED - 1)
  Does not remove room when it has content
  Raises exception when null room name given

Failures:

  1) remove_empty_room

        error: ORA-20001: Test exception
               ORA-06512: at &quot;UT3.TEST_REMOVE_ROOMS_BY_NAME&quot;, line 39
               ORA-06512: at line 6

Finished in ,039346 seconds
3 tests, 0 failed, 1 errored, 0 ignored.
</code></pre>

<p>Example of reporting with exception thrown in <code>%test</code>:</p>
<pre><code>Remove rooms by name
  Removes a room without content in it (FAILED - 1)
  Does not remove room when it has content
  Raises exception when null room name given

Failures:

  1) remove_empty_room

        error: ORA-20001: Test exception
               ORA-06512: at &quot;UT3.TEST_REMOVE_ROOMS_BY_NAME&quot;, line 48
               ORA-06512: at line 6

Finished in ,035726 seconds
3 tests, 0 failed, 1 errored, 0 ignored.
</code></pre>

<p>Example of reporting with exception thrown in <code>%aftertest</code>:</p>
<pre><code>Remove rooms by name
  Removes a room without content in it (FAILED - 1)
  Does not remove room when it has content
  Raises exception when null room name given

Failures:

  1) remove_empty_room

        error: ORA-20001: Test exception
               ORA-06512: at &quot;UT3.TEST_REMOVE_ROOMS_BY_NAME&quot;, line 42
               ORA-06512: at line 6

Finished in ,045523 seconds
3 tests, 0 failed, 1 errored, 0 ignored.
</code></pre>

<p>Example of reporting with exception thrown in <code>%aftereach</code>:</p>
<pre><code>Remove rooms by name
  Removes a room without content in it (FAILED - 1)
  Does not remove room when it has content (FAILED - 2)
  Raises exception when null room name given (FAILED - 3)

Failures:

  1) remove_empty_room

        error: ORA-20001: Test exception
               ORA-06512: at &quot;UT3.TEST_REMOVE_ROOMS_BY_NAME&quot;, line 31
               ORA-06512: at line 6

  2) room_with_content

        error: ORA-20001: Test exception
               ORA-06512: at &quot;UT3.TEST_REMOVE_ROOMS_BY_NAME&quot;, line 31
               ORA-06512: at line 6

  3) null_room_name

        error: ORA-20001: Test exception
               ORA-06512: at &quot;UT3.TEST_REMOVE_ROOMS_BY_NAME&quot;, line 31
               ORA-06512: at line 6

Finished in ,034863 seconds
3 tests, 0 failed, 3 errored, 0 ignored.
</code></pre>

<p>Example of reporting with exception thrown in <code>%afterall</code>:</p>
<pre><code>Remove rooms by name
  Removes a room without content in it
  Does not remove room when it has content
  Raises exception when null room name given

Warnings:

  1) test_remove_rooms_by_name - Afterall procedure failed: 
       ORA-20001: Test exception
       ORA-06512: at &quot;UT3.TEST_REMOVE_ROOMS_BY_NAME&quot;, line 35
       ORA-06512: at line 6

Finished in ,044902 seconds
3 tests, 0 failed, 0 errored, 0 ignored. 1 warning(s)
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2016 - 2017 utPLSQL Team</p>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
