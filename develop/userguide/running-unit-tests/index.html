<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Running unit tests - utPLSQL</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../../index.html">utPLSQL</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../../index.html">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../install/index.html">Installation</a>
</li>
                            
<li >
    <a href="../getting-started/index.html">Getting Started</a>
</li>
                            
<li >
    <a href="../annotations/index.html">Annotations</a>
</li>
                            
<li >
    <a href="../expectations/index.html">Expectations</a>
</li>
                            
<li class="active">
    <a href="index.html">Running unit tests</a>
</li>
                            
<li >
    <a href="../ut_run-script/index.html">Using the ut_run script</a>
</li>
                            
<li >
    <a href="../best-practices/index.html">Testing best pracitces</a>
</li>
                            
<li >
    <a href="../upgrade/index.html">Upgrade utPLSQL</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reporting <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../reporters/index.html">Using reporters</a>
</li>
                            
<li >
    <a href="../exception-reporting/index.html">Reporting errors</a>
</li>
                            
<li >
    <a href="../coverage/index.html">Code coverage</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../../about/project-details/index.html">Project Details</a>
</li>
                            
<li >
    <a href="../../about/license/index.html">License</a>
</li>
                            
<li >
    <a href="../../about/support/index.html">Support</a>
</li>
                            
<li >
    <a href="../../about/authors/index.html">Authors</a>
</li>
                            
<li >
    <a href="../../about/CONTRIBUTING/index.html">Contributing</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../expectations/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../ut_run-script/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/utPLSQL/utPLSQL">
                                <i class="fa fa-github"></i>GitHub
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#utrun">ut.run</a></li>
            <li><a href="#utrun-procedures">ut.run procedures</a></li>
            <li><a href="#utrun-functions">ut.run functions</a></li>
        <li class="main "><a href="#ut_runnerrun">ut_runner.run</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p>utPLSQL framework provides two main entry points to run unit tests from within database: 
- <code>ut.run</code> procedures and functions
- <code>ut_runner.run</code> procedures</p>
<p>Those two entry points differ in purpose and behavior.</p>
<h1 id="utrun">ut.run</h1>
<p>Package <code>ut</code> contains overloaded procedures and functions <code>run</code>.
The <code>run</code> API is designed to be called directly by developer, when using IDE/SQL console to execute unit tests.
The main benefit of using this API is it's simplicity.
One-line call is enough to execute a set of tests form one or multiple schemes.</p>
<p>The <strong>procedures</strong> execute specified tests and produces outputs to DBMS_OUTPUT using specified reporter
The <strong>functions</strong> can only be used in SELECT statements. They execute specified tests and produce outputs as a pipelined data stream to be consumed by select satement.</p>
<h2 id="utrun-procedures">ut.run procedures</h2>
<p>Examples:</p>
<pre><code class="sql">alter session set current_schema=hr;
begin
  ut.run();
end;
</code></pre>

<p>Execute all tests in current schema (<em>HR</em>).</p>
<pre><code class="sql">begin
  ut.run('HR');
end;
</code></pre>

<p>Execute all tests in specified schema (<em>HR</em>).</p>
<pre><code class="sql">begin
  ut.run('hr:com.my_org.my_project');
end;
</code></pre>

<p>Execute all tests from all packages that are on the <em>COM.MY_ORG.MY_PROJECT</em> suitepath.
Check the <a href="../annotations/index.html">annotations documentation</a> to find out about suitepaths and how they can be used to group test packages.</p>
<pre><code class="sql">begin
  ut.run('hr.test_apply_bonus');
end;
</code></pre>

<p>Execute all tests from package <em>HR.TEST_APPLY_BONUS</em>. </p>
<pre><code class="sql">begin
  ut.run('hr.test_apply_bonus.bonus_cannot_be_negative');
end;
</code></pre>

<p>Execute single test procedure <em>HR.TEST_APPLY_BONUS.BONUS_CANNOT_BE_NEGATIVE</em>.</p>
<pre><code class="sql">begin
  ut.run(ut_varcahr2_list('hr.test_apply_bonus','cust'));
end;
</code></pre>

<p>Execute all tests from package <em>HR.TEST_APPLY_BONUS</em> and all tests from schema <em>CUST</em>.
Using a list of items to execute allows you to execute a fine-grained set of tests.</p>
<p><strong>Note:</strong>
<code>ut_documentation_reporter</code> is default reporter for all API's defined for running unit tests.</p>
<p>The <code>ut.run</code> procedures and functions accept <code>a_reporter</code> attribute that defines the reporter to be used in the run.
You can execute any set of tests with any of the predefined reporters.</p>
<pre><code class="sql">begin
  ut.run('hr.test_apply_bonus', ut_xunit_reporter());
end;
</code></pre>

<p>Execute all tests from package <em>HR.TEST_APPLY_BONUS</em> and provide outputs to DBMS_OUTPUT using the XUnit reporter. </p>
<p>For details on build-in reporters look at <a href="../reporters/index.html">reporters documentation</a>.</p>
<h2 id="utrun-functions">ut.run functions</h2>
<p>The <code>ut.run</code> functions provide exactly the same functionality as the procedures. You may use the same sets of parameters with both functions and procedures. The only difference is the output of the results.
Functions provide outputs as pipelined stream and therefore need to be executed as select statements.</p>
<p>Example.</p>
<pre><code class="sql">select * from table(ut.run('hr.test_apply_bonus', ut_xunit_reporter()));
</code></pre>

<h1 id="ut_runnerrun">ut_runner.run</h1>
<p>The <code>ut_runner</code> provides API for integrating utPLSQL with other products. Maven, Jenkins, SQL Develper, PL/SQL Developer, TOAD and others can leverage this API to call utPLSQL.</p>
<p>The main difference as compared to <code>ut.run</code> API is that the <code>ut_runner.run</code> does not print outputs to the screen.</p>
<p><code>ut_runner.run</code> accepts multiple reporters. Each reporter produces outputs into a separate output (uniquely identified by output_id).
Outputs of multiple reporters can be consumed in parallel. This allows for live reporting of test execution progress with threads and several database sessions.</p>
<p>The concept is pretty simple.</p>
<ul>
<li>in the main thread (session), define the reporters to be used. Each reporter has it's output_id and so you need to extract and store those output_id's.</li>
<li>as a separate thread, start the <code>ut_runner.run</code> and pass reporters with previously defined output_id's</li>
<li>for each reporter start a separate thread and read outputs from <code>ut_output_buffer.get_lines</code> table function by providing the output_id defined in the main thread.</li>
</ul>
<p><code>ut_runner.run</code> is internally used by the <a href="../ut_run-script/index.html"><code>ut_run.sql</code> script</a> which is a utility for running tests with multiple reporters and provides parameters to save reporters results into individual files on the local file system.  </p></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2016 - 2017 utPLSQL Team</p>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
